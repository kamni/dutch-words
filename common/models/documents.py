"""
Copyright (C) J Leadbetter <j@jleadbetter.com>
Affero GPL v3
"""

from typing import List, Optional

from pydantic import BaseModel

from .sentences import SentenceDB, SentenceUI
from .users import UserUI
from ..utils.languages import LanguageCode


class DocumentDBMinimal(BaseModel):
    """
    Minimal representation of a document in the database
    """

    id: str = None
    user_id: str  # UUID.
    display_name: str
    language_code: LanguageCode


class DocumentDB(BaseModel):
    """
    Representation of a document to be stored in the database
    """

    id: Optional[str] = None  # UUID. Generated by the database.
    user_id: str  # UUID
    display_name: str
    language_code: LanguageCode
    doc_file: str  # Relative path in file system
    sentences: List[SentenceDBMinimal]
    translations: Optional[List[DocumentDBMinimal]] = None


class DocumentUIMinimal(BaseModel):
    """
    Bare minimum display of documents in the UI
    Excludes Sentences and Words
    """

    id: str  # UUID
    user: UserUI
    displayName: str
    languageCode: LanguageCode


class DocumentUI(BaseModel):
    """
    All information needed to display a Document and its Sentences/Words.
    Includes user tracking for learned words
    """

    id: str  # UUID
    user: UserUI
    displayName: str
    languageCode: languageCode
    sentences: List[SentenceUI]
